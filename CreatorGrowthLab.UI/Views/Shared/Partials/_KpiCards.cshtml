@model CreatorGrowthLab.UI.Models.Analytics.AnalyticsResponse
@using System.Globalization

@{
    string F0(double x) => x.ToString("N0", CultureInfo.InvariantCulture);
    string F2(double x) => x.ToString("0.##", CultureInfo.InvariantCulture);
    string P2(double x) => (x * 100.0).ToString("0.##", CultureInfo.InvariantCulture) + "%";

    var kpis = new[]
    {
        new {
            Title = "Videos",
            Value = Model.Kpis.VideosAnalyzed.ToString(),
            Subtitle = "Total analyzed",
            ValueClass = "text-slate-900",
            HoverBorder = "hover:border-indigo-300"
        },
        new {
            Title = "Baseline",
            Value = F0(Model.Kpis.BaselineViewsPerDay),
            Subtitle = "Views per day (median)",
            ValueClass = "text-slate-900",
            HoverBorder = "hover:border-blue-300"
        },
        new {
            Title = "Performance",
            Value = $"{F2(Model.Kpis.MedianRelativePerformance)}x",
            Subtitle = "Relative to baseline",
            ValueClass = "text-indigo-600",
            HoverBorder = "hover:border-indigo-300"
        },
        new {
            Title = "Engagement",
            Value = P2(Model.Kpis.AvgEngagementRate),
            Subtitle = "Likes + comments / views",
            ValueClass = "text-emerald-600",
            HoverBorder = "hover:border-emerald-300"
        }
    };
}

<div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6 items-start">

    @foreach (var kpi in kpis)
    {
        <div class="group relative overflow-hidden rounded-2xl min-h-[140px]
                    border-2 border-slate-200 bg-white p-6 shadow-lg
                    hover:shadow-xl transition-all duration-300 @kpi.HoverBorder">

            <div class="relative">
                <div class="text-sm font-bold text-slate-600 uppercase tracking-wide">
                    @kpi.Title
                </div>

                <div class="mt-3 text-4xl font-black @kpi.ValueClass">
                    @kpi.Value
                </div>

                <div class="mt-2 text-sm text-slate-500 font-medium">
                    @kpi.Subtitle
                </div>
            </div>

        </div>
    }

</div>
