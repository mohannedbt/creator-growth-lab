@model CreatorGrowthLab.UI.Models.Analytics.AnalyticsResponse
@using System.Text.Json
@using System.Globalization

@{
    var ordered = Model.Trends?
        .OrderBy(t => t.PublishedAt)
        .ToList() ?? new();

    var trendLabels = JsonSerializer.Serialize(
        ordered.Select(t => t.PublishedAt.ToString("MMM dd", CultureInfo.InvariantCulture))
    );

    var relPerf = JsonSerializer.Serialize(
        ordered.Select(t => t.RelativePerformance)
    );
}

<div class="rounded-2xl border-2 border-slate-200 bg-white shadow-xl overflow-hidden">
    <div class="bg-gradient-to-r from-slate-50 to-slate-100 px-8 py-6 border-b-2 border-slate-200">
        <h2 class="text-2xl font-black text-slate-900">Performance Trend</h2>
        <p class="text-sm text-slate-600">Relative performance over time</p>
    </div>

    <div class="p-8">
        <div class="h-80">
            <canvas
                id="trendChart"
                data-labels='@Html.Raw(trendLabels)'
                data-values='@Html.Raw(relPerf)'>
            </canvas>
        </div>
    </div>
</div>